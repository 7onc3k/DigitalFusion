---
import Layout from '../layouts/Layout.astro';
import { projects } from '../data/projects.js';


const categories = ["Všechny", "E-commerce", "Mobilní aplikace", "Webdesign"];
---

<Layout title="Portfolio - DigitalFusion">
    <h1>Naše práce</h1>
    
    <div class="category-filter">
        {categories.map(category => (
            <button class="category-btn" data-category={category}>{category}</button>
        ))}
    </div>

    <div class="project-grid">
        {projects.map(project => (
            <div class="project-card" data-category={project.category}>
                <img src={project.image} alt={project.title} />
                <h2>{project.title}</h2>
                <p>{project.description}</p>
                <div class="technologies">
                    {project.technologies.map(tech => (
                        <span class="tech-tag">{tech}</span>
                    ))}
                </div>
                <a href={`#${project.id}`} class="view-details">Zobrazit detaily</a>
            </div>
        ))}
    </div>

    {projects.map(project => (
        <div id={project.id} class="project-details">
            <h2>{project.title}</h2>
            <img src={project.image} alt={project.title} />
            <p>{project.description}</p>
            <h3>Použité technologie:</h3>
            <ul>
                {project.technologies.map(tech => (
                    <li>{tech}</li>
                ))}
            </ul>
        </div>
    ))}
</Layout>

<style>
    .category-filter {
        margin-bottom: 2rem;
    }
    .category-btn {
        margin-right: 0.5rem;
        padding: 0.5rem 1rem;
        border: none;
        background-color: #f0f0f0;
        cursor: pointer;
    }
    .project-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
    }
    .project-card {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        overflow: hidden;
    }
    .project-card img {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }
    .technologies {
        margin: 1rem 0;
    }
    .tech-tag {
        display: inline-block;
        background-color: #007bff;
        color: #fff;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        margin-right: 0.5rem;
        font-size: 0.8rem;
    }
    .view-details {
        display: inline-block;
        margin: 1rem;
        padding: 0.5rem 1rem;
        background-color: #007bff;
        color: #fff;
        text-decoration: none;
        border-radius: 4px;
    }
    .project-details {
        display: none;
        padding: 2rem;
        background-color: #f8f9fa;
        margin-top: 2rem;
        border-radius: 8px;
    }
</style>

<script>
    // Skript pro filtrování projektů a zobrazení detailů
    const categoryButtons = document.querySelectorAll('.category-btn') as NodeListOf<HTMLButtonElement>;
    const projectCards = document.querySelectorAll('.project-card') as NodeListOf<HTMLElement>;
    const projectDetails = document.querySelectorAll('.project-details') as NodeListOf<HTMLElement>;

    categoryButtons.forEach(button => {
        button.addEventListener('click', () => {
            const category = button.dataset.category;
            projectCards.forEach(card => {
                if (category === 'Všechny' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });
    });

    const viewDetailsLinks = document.querySelectorAll('.view-details') as NodeListOf<HTMLAnchorElement>;
    viewDetailsLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('href')!.substring(1);
            projectDetails.forEach(detail => {
                if (detail.id === targetId) {
                    detail.style.display = 'block';
                } else {
                    detail.style.display = 'none';
                }
            });
        });
    });
</script>
---
import Layout from '../layouts/Layout.astro';
import Button from '../components/Button.astro';
import { Icon } from 'astro-icon/components';
---
<Layout title="Kontakt - DigitalFusion">
    <!-- Zde zůstává HTML část nezměněna -->
</Layout>
<script>
    const form = document.getElementById('contact-form') as HTMLFormElement;
    if (form) {
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(form);
            try {
                console.log('Sending form data...');
                const response = await fetch('/api/send-email', {
                    method: 'POST',
                    body: formData
                });
                console.log('Response status:', response.status);
                const data = await response.json();
                console.log('Response data:', data);
                if (!response.ok) {
                    throw new Error(data.message || `HTTP error! status: ${response.status}`);
                }
                alert(data.message || 'Formulář byl úspěšně odeslán!');
                form.reset();
            } catch (error: unknown) {
                console.error('Error sending form:', error);
                let errorMessage = 'Při odesílání formuláře došlo k chybě';
                if (error instanceof Error) {
                    errorMessage += `: ${error.message}`;
                }
                alert(errorMessage);
            }
        });
    }
</script>